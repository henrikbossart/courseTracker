var cov_yiamht0ac=function(){var path='/Users/henrikbossart/Workspace/Programvareutvikling/pu087/server/index.js',hash='9148ca7dfc62b658228ce238b60b031ba140be64',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/henrikbossart/Workspace/Programvareutvikling/pu087/server/index.js',statementMap:{'0':{start:{line:5,column:18},end:{line:5,column:36}},'1':{start:{line:6,column:18},end:{line:6,column:44}},'2':{start:{line:7,column:18},end:{line:7,column:42}},'3':{start:{line:8,column:18},end:{line:8,column:40}},'4':{start:{line:9,column:18},end:{line:9,column:35}},'5':{start:{line:10,column:18},end:{line:10,column:27}},'6':{start:{line:11,column:18},end:{line:11,column:42}},'7':{start:{line:13,column:18},end:{line:13,column:37}},'8':{start:{line:14,column:18},end:{line:14,column:42}},'9':{start:{line:15,column:18},end:{line:15,column:34}},'10':{start:{line:16,column:18},end:{line:16,column:33}},'11':{start:{line:17,column:18},end:{line:17,column:33}},'12':{start:{line:18,column:18},end:{line:18,column:34}},'13':{start:{line:25,column:0},end:{line:25,column:42}},'14':{start:{line:28,column:0},end:{line:28,column:23}},'15':{start:{line:29,column:0},end:{line:29,column:24}},'16':{start:{line:30,column:0},end:{line:32,column:4}},'17':{start:{line:33,column:0},end:{line:33,column:27}},'18':{start:{line:36,column:0},end:{line:36,column:30}},'19':{start:{line:37,column:0},end:{line:37,column:56}},'20':{start:{line:38,column:0},end:{line:38,column:48}},'21':{start:{line:54,column:17},end:{line:54,column:48}},'22':{start:{line:55,column:17},end:{line:55,column:60}},'23':{start:{line:56,column:0},end:{line:56,column:45}},'24':{start:{line:62,column:0},end:{line:65,column:32}},'25':{start:{line:66,column:0},end:{line:66,column:31}},'26':{start:{line:67,column:0},end:{line:67,column:28}},'27':{start:{line:68,column:0},end:{line:68,column:17}},'28':{start:{line:74,column:0},end:{line:74,column:54}},'29':{start:{line:80,column:0},end:{line:82,column:3}},'30':{start:{line:81,column:4},end:{line:81,column:50}},'31':{start:{line:84,column:0},end:{line:84,column:21}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:80,column:17},end:{line:80,column:18}},loc:{start:{line:80,column:29},end:{line:82,column:1}},line:80}},branchMap:{'0':{loc:{start:{line:11,column:18},end:{line:11,column:42}},type:'binary-expr',locations:[{start:{line:11,column:18},end:{line:11,column:34}},{start:{line:11,column:38},end:{line:11,column:42}}],line:11}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0},f:{'0':0},b:{'0':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();/////////////////////////////////////////////////////
// IMPORTING MODULES AND DEPENDENCIES
/////////////////////////////////////////////////////
var express=(++cov_yiamht0ac.s[0],require('express'));var session=(++cov_yiamht0ac.s[1],require('express-session'));var cookieParser=(++cov_yiamht0ac.s[2],require('cookie-parser'));var bodyParser=(++cov_yiamht0ac.s[3],require('body-parser'));var morgan=(++cov_yiamht0ac.s[4],require('morgan'));var app=(++cov_yiamht0ac.s[5],express());var port=(++cov_yiamht0ac.s[6],(++cov_yiamht0ac.b[0][0],process.env.PORT)||(++cov_yiamht0ac.b[0][1],3000));var passport=(++cov_yiamht0ac.s[7],require('passport'));var flash=(++cov_yiamht0ac.s[8],require('connect-flash'));var mysql=(++cov_yiamht0ac.s[9],require('mysql'));var path=(++cov_yiamht0ac.s[10],require('path'));var http=(++cov_yiamht0ac.s[11],require('http'));var router=(++cov_yiamht0ac.s[12],express.Router());//var data        = require('./routes/data');
/////////////////////////////////////////////////////
// SETTING UP ENVIRONMENT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[13];require('./config/passport.js')(passport);// Morgan, CookieParser and BodyParser are used to log every request in detail
++cov_yiamht0ac.s[14];app.use(morgan('dev'));++cov_yiamht0ac.s[15];app.use(cookieParser());++cov_yiamht0ac.s[16];app.use(bodyParser.urlencoded({extended:true}));++cov_yiamht0ac.s[17];app.use(bodyParser.json());// Setting the view engine and defining paths
++cov_yiamht0ac.s[18];app.set('view engine','ejs');++cov_yiamht0ac.s[19];app.use(express.static(path.join(__dirname,'public')));++cov_yiamht0ac.s[20];app.set('views',path.join(__dirname,'views'));//Writing request data to console for easier debugging
/*
router.use(function (req, res, next) {
    var request_text    = 'Request: ' + req.protocol + '://' + req.hostname + '@' + req.ip + req.path;
    console.log(request_text);
    next();
});
*//////////////////////////////////////////////////////
// CONNECTING TO DATABASE
/////////////////////////////////////////////////////
var dbconfig=(++cov_yiamht0ac.s[21],require('./config/database.js'));var connection=(++cov_yiamht0ac.s[22],mysql.createConnection(dbconfig.connection));++cov_yiamht0ac.s[23];connection.query('USE '+dbconfig.database);/////////////////////////////////////////////////////
// STARTING PASSPORT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[24];app.use(session({secret:'unicornsareawesome',resave:true,saveUninitialized:true}));++cov_yiamht0ac.s[25];app.use(passport.initialize());++cov_yiamht0ac.s[26];app.use(passport.session());++cov_yiamht0ac.s[27];app.use(flash());/////////////////////////////////////////////////////
// DEFINING ROUTES
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[28];require('./routes/routes')(app,passport,connection);/////////////////////////////////////////////////////
// LAUNCHING CLIENT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[29];app.listen(port,function(){++cov_yiamht0ac.f[0];++cov_yiamht0ac.s[30];console.log('server running on port '+port);});++cov_yiamht0ac.s[31];module.exports=app;