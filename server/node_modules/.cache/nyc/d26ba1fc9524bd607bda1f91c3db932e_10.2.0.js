var cov_yiamht0ac=function(){var path='/Users/henrikbossart/Workspace/Programvareutvikling/pu087/server/index.js',hash='f976b4c556482ee02611aaa115138db98b0950c3',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/henrikbossart/Workspace/Programvareutvikling/pu087/server/index.js',statementMap:{'0':{start:{line:5,column:18},end:{line:5,column:36}},'1':{start:{line:6,column:18},end:{line:6,column:44}},'2':{start:{line:7,column:18},end:{line:7,column:42}},'3':{start:{line:8,column:18},end:{line:8,column:40}},'4':{start:{line:9,column:18},end:{line:9,column:35}},'5':{start:{line:10,column:18},end:{line:10,column:27}},'6':{start:{line:11,column:18},end:{line:11,column:42}},'7':{start:{line:13,column:18},end:{line:13,column:37}},'8':{start:{line:14,column:18},end:{line:14,column:42}},'9':{start:{line:15,column:18},end:{line:15,column:34}},'10':{start:{line:16,column:18},end:{line:16,column:33}},'11':{start:{line:17,column:18},end:{line:17,column:33}},'12':{start:{line:18,column:18},end:{line:18,column:34}},'13':{start:{line:19,column:18},end:{line:19,column:42}},'14':{start:{line:25,column:0},end:{line:25,column:42}},'15':{start:{line:28,column:0},end:{line:28,column:23}},'16':{start:{line:29,column:0},end:{line:29,column:24}},'17':{start:{line:30,column:0},end:{line:32,column:4}},'18':{start:{line:33,column:0},end:{line:33,column:27}},'19':{start:{line:36,column:0},end:{line:36,column:30}},'20':{start:{line:37,column:0},end:{line:37,column:56}},'21':{start:{line:38,column:0},end:{line:38,column:48}},'22':{start:{line:42,column:0},end:{line:46,column:2}},'23':{start:{line:43,column:26},end:{line:43,column:101}},'24':{start:{line:44,column:4},end:{line:44,column:30}},'25':{start:{line:45,column:4},end:{line:45,column:11}},'26':{start:{line:52,column:17},end:{line:52,column:48}},'27':{start:{line:53,column:17},end:{line:53,column:60}},'28':{start:{line:54,column:0},end:{line:54,column:45}},'29':{start:{line:60,column:0},end:{line:63,column:32}},'30':{start:{line:64,column:0},end:{line:64,column:31}},'31':{start:{line:65,column:0},end:{line:65,column:28}},'32':{start:{line:66,column:0},end:{line:66,column:17}},'33':{start:{line:72,column:0},end:{line:72,column:54}},'34':{start:{line:78,column:0},end:{line:80,column:3}},'35':{start:{line:79,column:4},end:{line:79,column:50}},'36':{start:{line:82,column:0},end:{line:82,column:21}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:42,column:11},end:{line:42,column:12}},loc:{start:{line:42,column:37},end:{line:46,column:1}},line:42},'1':{name:'(anonymous_1)',decl:{start:{line:78,column:17},end:{line:78,column:18}},loc:{start:{line:78,column:29},end:{line:80,column:1}},line:78}},branchMap:{'0':{loc:{start:{line:11,column:18},end:{line:11,column:42}},type:'binary-expr',locations:[{start:{line:11,column:18},end:{line:11,column:34}},{start:{line:11,column:38},end:{line:11,column:42}}],line:11}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0},f:{'0':0,'1':0},b:{'0':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();/////////////////////////////////////////////////////
// IMPORTING MODULES AND DEPENDENCIES
/////////////////////////////////////////////////////
var express=(++cov_yiamht0ac.s[0],require('express'));var session=(++cov_yiamht0ac.s[1],require('express-session'));var cookieParser=(++cov_yiamht0ac.s[2],require('cookie-parser'));var bodyParser=(++cov_yiamht0ac.s[3],require('body-parser'));var morgan=(++cov_yiamht0ac.s[4],require('morgan'));var app=(++cov_yiamht0ac.s[5],express());var port=(++cov_yiamht0ac.s[6],(++cov_yiamht0ac.b[0][0],process.env.PORT)||(++cov_yiamht0ac.b[0][1],3000));var passport=(++cov_yiamht0ac.s[7],require('passport'));var flash=(++cov_yiamht0ac.s[8],require('connect-flash'));var mysql=(++cov_yiamht0ac.s[9],require('mysql'));var path=(++cov_yiamht0ac.s[10],require('path'));var http=(++cov_yiamht0ac.s[11],require('http'));var router=(++cov_yiamht0ac.s[12],express.Router());var data=(++cov_yiamht0ac.s[13],require('./routes/data'));/////////////////////////////////////////////////////
// SETTING UP ENVIRONMENT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[14];require('./config/passport.js')(passport);// Morgan, CookieParser and BodyParser are used to log every request in detail
++cov_yiamht0ac.s[15];app.use(morgan('dev'));++cov_yiamht0ac.s[16];app.use(cookieParser());++cov_yiamht0ac.s[17];app.use(bodyParser.urlencoded({extended:true}));++cov_yiamht0ac.s[18];app.use(bodyParser.json());// Setting the view engine and defining paths
++cov_yiamht0ac.s[19];app.set('view engine','ejs');++cov_yiamht0ac.s[20];app.use(express.static(path.join(__dirname,'public')));++cov_yiamht0ac.s[21];app.set('views',path.join(__dirname,'views'));//Writing request data to console for easier debugging
++cov_yiamht0ac.s[22];router.use(function(req,res,next){++cov_yiamht0ac.f[0];var request_text=(++cov_yiamht0ac.s[23],'Request: '+req.protocol+'://'+req.hostname+'@'+req.ip+req.path);++cov_yiamht0ac.s[24];console.log(request_text);++cov_yiamht0ac.s[25];next();});/////////////////////////////////////////////////////
// CONNECTING TO DATABASE
/////////////////////////////////////////////////////
var dbconfig=(++cov_yiamht0ac.s[26],require('./config/database.js'));var connection=(++cov_yiamht0ac.s[27],mysql.createConnection(dbconfig.connection));++cov_yiamht0ac.s[28];connection.query('USE '+dbconfig.database);/////////////////////////////////////////////////////
// STARTING PASSPORT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[29];app.use(session({secret:'unicornsareawesome',resave:true,saveUninitialized:true}));++cov_yiamht0ac.s[30];app.use(passport.initialize());++cov_yiamht0ac.s[31];app.use(passport.session());++cov_yiamht0ac.s[32];app.use(flash());/////////////////////////////////////////////////////
// DEFINING ROUTES
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[33];require('./routes/routes')(app,passport,connection);/////////////////////////////////////////////////////
// LAUNCHING CLIENT
/////////////////////////////////////////////////////
++cov_yiamht0ac.s[34];app.listen(port,function(){++cov_yiamht0ac.f[1];++cov_yiamht0ac.s[35];console.log('server running on port '+port);});++cov_yiamht0ac.s[36];module.exports=app;